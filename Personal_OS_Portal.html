<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DEBOY.OS // SATELLITE_LINK_ACTIVE</title>
    <!-- PWA -->
    <link rel="manifest" href="manifest.json">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="DEBOY.OS">
    <link rel="apple-touch-icon" href="icon.png">
    <meta name="theme-color" content="#020617">
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: {
                        sans: ['Montserrat', 'sans-serif'],
                        mono: ['JetBrains Mono', 'monospace'],
                    },
                    colors: {
                        obsidian: '#020617',
                        magenta: '#d946ef',
                    },
                    animation: {
                        'scan': 'scan 8s linear infinite',
                        'twinkle-1': 'twinkle 3s ease-in-out infinite',
                        'twinkle-2': 'twinkle 5s ease-in-out infinite',
                        'twinkle-3': 'twinkle 7s ease-in-out infinite',
                    },
                    keyframes: {
                        scan: {
                            '0%': { transform: 'translateY(-100%)' },
                            '100%': { transform: 'translateY(100%)' },
                        },
                        twinkle: {
                            '0%, 100%': { opacity: '0.2' },
                            '50%': { opacity: '0.8' },
                        }
                    }
                }
            }
        }
    </script>
    <!-- Fonts -->
    <link
        href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;700&family=Montserrat:wght@400;500;700;900&display=swap"
        rel="stylesheet">
    <!-- Icons -->
    <script src="https://unpkg.com/lucide@latest"></script>
    <style>
        body {
            background-color: #020617;
            color: #ffffff;
            margin: 0;
            font-family: 'Montserrat', sans-serif;
            overflow-x: hidden;
        }

        .glass-panel {
            background: rgba(15, 23, 42, 0.8);
            backdrop-filter: blur(24px);
            border: 1px solid rgba(34, 211, 238, 0.2);
        }

        .scanlines {
            background: linear-gradient(to bottom,
                    rgba(255, 255, 255, 0),
                    rgba(255, 255, 255, 0) 50%,
                    rgba(0, 0, 0, 0.2) 50%,
                    rgba(0, 0, 0, 0.2));
            background-size: 100% 4px;
        }

        .radar-sweep-icon {
            background: conic-gradient(from 0deg at 50% 50%,
                    transparent 0deg,
                    rgba(34, 211, 238, 0.4) 60deg,
                    transparent 90deg);
            animation: rotate 4s linear infinite;
            border-radius: 50%;
        }

        .radar-sweep {
            background: conic-gradient(from 0deg at 50% 50%,
                    transparent 0deg,
                    rgba(34, 211, 238, 0.1) 60deg,
                    transparent 90deg);
            animation: rotate 10s linear infinite;
        }

        @keyframes rotate {
            from {
                transform: rotate(0deg);
            }

            to {
                transform: rotate(360deg);
            }
        }

        /* Scrollbar */
        ::-webkit-scrollbar {
            width: 6px;
        }

        ::-webkit-scrollbar-track {
            background: #020617;
        }

        ::-webkit-scrollbar-thumb {
            background: #22d3ee;
            border-radius: 3px;
        }

        .animate-blink {
            animation: blink 1.5s infinite;
        }

        @keyframes blink {

            0%,
            100% {
                opacity: 0.2;
            }

            50% {
                opacity: 1;
            }
        }

        /* Mobile Adjustments */
        @media (max-width: 640px) {
            h1 {
                font-size: 2rem !important;
                line-height: 1.2 !important;
            }

            .hero-text {
                font-size: 0.875rem !important;
            }

            nav span {
                font-size: 0.6rem !important;
                letter-spacing: 0.1em !important;
            }

            .pillar-card {
                padding: 1.5rem !important;
            }

            .pillar-card h2 {
                font-size: 1.25rem !important;
            }

            #neuralCoreCard.focused {
                position: fixed;
                bottom: 0;
                left: 0;
                width: 100%;
                z-index: 200;
                height: 70vh;
                border-radius: 20px 20px 0 0;
                background: rgba(15, 23, 42, 0.95);
                backdrop-filter: blur(40px);
                transition: all 0.3s ease;
            }
        }

        .chat-terminal::-webkit-scrollbar {
            width: 4px;
        }

        .chat-terminal::-webkit-scrollbar-track {
            background: #020617;
        }

        .chat-terminal::-webkit-scrollbar-thumb {
            background: #d946ef;
            border-radius: 10px;
        }

        .ai-message {
            color: #fdf4ff;
            text-shadow: 0 0 10px rgba(217, 70, 239, 0.4);
        }

        .typing-cursor {
            display: inline-block;
            width: 8px;
            height: 15px;
            background: #d946ef;
            margin-left: 4px;
            animation: blink-magenta 0.8s step-end infinite;
            vertical-align: middle;
        }

        @keyframes blink-magenta {

            from,
            to {
                opacity: 0
            }

            50% {
                opacity: 1
            }
        }
    </style>
</head>

<body class="bg-[#020617] text-white overflow-x-hidden min-h-screen relative font-sans mobile-pwa-safe">

    <!-- Background Layers -->
    <div id="starfield" class="fixed inset-0 z-0 pointer-events-none"></div>
    <div class="fixed inset-0 z-0 pointer-events-none radar-sweep opacity-20"></div>
    <div class="fixed inset-0 z-50 pointer-events-none scanlines opacity-10"></div>

    <!-- Navigation -->
    <nav class="fixed top-0 w-full z-40 glass-panel border-b border-cyan-900/50">
        <div class="max-w-7xl mx-auto px-6 py-4 flex justify-between items-center">
            <div onclick="handleLogoClick()" class="flex items-center space-x-3 cursor-pointer group">
                <i data-lucide="satellite"
                    class="text-cyan-400 animate-pulse group-hover:scale-110 transition-transform"></i>
                <span class="font-mono text-sm tracking-[0.2em] text-cyan-400 font-bold">DEBOY.OS //
                    SATELLITE_LINK_ACTIVE</span>
            </div>
            <div class="hidden md:flex space-x-8 text-xs font-bold tracking-widest text-slate-400">
                <a href="#"
                    class="hover:text-cyan-400 hover:shadow-[0_0_10px_rgba(34,211,238,0.5)] transition-all">[ARCHIVE]</a>
                <a href="#"
                    class="hover:text-cyan-400 hover:shadow-[0_0_10px_rgba(34,211,238,0.5)] transition-all">[THE_LAB]</a>
                <a href="#"
                    class="hover:text-cyan-400 hover:shadow-[0_0_10px_rgba(34,211,238,0.5)] transition-all">[GROWTH_LOG]</a>
                <a href="#" onclick="openModal('contact')"
                    class="hover:text-cyan-400 hover:shadow-[0_0_10px_rgba(34,211,238,0.5)] transition-all">[CONTACT]</a>
            </div>
        </div>
    </nav>

    <!-- Main Content -->
    <main class="relative z-10 pt-32 pb-24 max-w-7xl mx-auto px-6 flex flex-col items-center">

        <!-- Hero Section -->
        <div class="text-center mb-20 max-w-4xl space-y-6">
            <p class="text-cyan-500 font-mono text-xs tracking-widest uppercase mb-2">System Secure // Clearance Level:
                Architect</p>
            <h1
                class="text-5xl md:text-7xl font-black tracking-tight text-white mb-4 drop-shadow-[0_0_15px_rgba(34,211,238,0.5)]">
                The Learning Portal Library
            </h1>
            <p
                class="hero-text text-lg md:text-xl text-slate-300 font-medium italic border-l-4 border-cyan-500 pl-6 py-2 bg-slate-900/50 inline-block text-left">
                "Synthesizing spatial precision and engineering logic to architect sustainable agricultural systems."
            </p>

            <!-- System Boot Log -->
            <div
                class="glass-panel p-6 rounded-lg text-left mt-12 w-full max-w-3xl mx-auto overflow-hidden relative group">
                <div class="absolute top-0 left-0 w-full h-1 bg-cyan-400 shadow-[0_0_10px_#22d3ee]"></div>
                <div class="font-mono text-xs md:text-sm text-emerald-400 space-y-1 h-32 overflow-y-auto" id="bootLog">
                    <!-- JS Injected Text -->
                </div>
            </div>
        </div>

        <!-- The Archive Grid (5 Pillars) -->
        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8 w-full">

            <!-- Pillar 1 -->
            <div onclick="openModal('pillar1')"
                class="glass-panel p-8 rounded-2xl pillar-card cursor-pointer group hover:scale-105 hover:shadow-[0_0_20px_rgba(34,211,238,0.3)] transition-all duration-300 ease-out relative overflow-hidden">
                <div
                    class="absolute -right-10 -top-10 text-9xl text-slate-800 opacity-20 group-hover:opacity-40 transition-opacity font-black">
                    01</div>
                <div class="flex items-center space-x-3 mb-4">
                    <i data-lucide="globe" class="text-cyan-400 w-8 h-8"></i>
                    <h2 class="text-xl font-bold font-mono text-cyan-300">GIS LAB</h2>
                </div>
                <p class="text-slate-400 text-sm mb-6">[Orbital Intelligence]</p>
                <div class="space-y-2">
                    <span
                        class="inline-block bg-cyan-950/50 border border-cyan-900 text-cyan-400 text-[10px] px-2 py-1 rounded font-mono">QGIS
                        MODULE</span>
                    <span
                        class="inline-block bg-cyan-950/50 border border-cyan-900 text-cyan-400 text-[10px] px-2 py-1 rounded font-mono">GOOGLE
                        EARTH</span>
                    <span
                        class="inline-block bg-cyan-950/50 border border-cyan-900 text-cyan-400 text-[10px] px-2 py-1 rounded font-mono">POLYGON
                        MGMT</span>
                </div>
            </div>

            <!-- Pillar 2 -->
            <div onclick="openModal('pillar2')"
                class="glass-panel p-8 rounded-2xl pillar-card cursor-pointer group hover:scale-105 hover:shadow-[0_0_20px_rgba(34,211,238,0.3)] transition-all duration-300 ease-out relative overflow-hidden">
                <div
                    class="absolute -right-10 -top-10 text-9xl text-slate-800 opacity-20 group-hover:opacity-40 transition-opacity font-black">
                    02</div>
                <div class="flex items-center space-x-3 mb-4">
                    <i data-lucide="cpu" class="text-purple-400 w-8 h-8"></i>
                    <h2 class="text-xl font-bold font-mono text-purple-300">AUTOMATION VAULT</h2>
                </div>
                <p class="text-slate-400 text-sm mb-6">[System Logic]</p>
                <div class="space-y-2">
                    <span
                        class="inline-block bg-purple-950/50 border border-purple-900 text-purple-400 text-[10px] px-2 py-1 rounded font-mono">PROCESS
                        AUTO</span>
                    <span
                        class="inline-block bg-purple-950/50 border border-purple-900 text-purple-400 text-[10px] px-2 py-1 rounded font-mono">VBA
                        / PCIC</span>
                    <span
                        class="inline-block bg-purple-950/50 border border-purple-900 text-purple-400 text-[10px] px-2 py-1 rounded font-mono">LLM
                        INTEGRATION</span>
                </div>
            </div>

            <!-- Pillar 3 -->
            <div onclick="openModal('pillar3')"
                class="glass-panel p-8 rounded-2xl pillar-card cursor-pointer group hover:scale-105 hover:shadow-[0_0_20px_rgba(34,211,238,0.3)] transition-all duration-300 ease-out relative overflow-hidden">
                <div
                    class="absolute -right-10 -top-10 text-9xl text-slate-800 opacity-20 group-hover:opacity-40 transition-opacity font-black">
                    03</div>
                <div class="flex items-center space-x-3 mb-4">
                    <i data-lucide="activity" class="text-amber-400 w-8 h-8"></i>
                    <h2 class="text-xl font-bold font-mono text-amber-300">ENGINEERING</h2>
                </div>
                <p class="text-slate-400 text-sm mb-6">[Structural Integrity]</p>
                <div class="space-y-2">
                    <span
                        class="inline-block bg-amber-950/50 border border-amber-900 text-amber-400 text-[10px] px-2 py-1 rounded font-mono">HEC-HMS</span>
                    <span
                        class="inline-block bg-amber-950/50 border border-amber-900 text-amber-400 text-[10px] px-2 py-1 rounded font-mono">CAD
                        / SKETCH-UP</span>
                    <span
                        class="inline-block bg-amber-950/50 border border-amber-900 text-amber-400 text-[10px] px-2 py-1 rounded font-mono">HYDRO
                        MODELLING</span>
                </div>
            </div>

            <!-- Pillar 4 -->
            <div onclick="openModal('pillar4')"
                class="glass-panel p-8 rounded-2xl pillar-card cursor-pointer group hover:scale-105 hover:shadow-[0_0_20px_rgba(34,211,238,0.3)] transition-all duration-300 ease-out relative overflow-hidden">
                <div
                    class="absolute -right-10 -top-10 text-9xl text-slate-800 opacity-20 group-hover:opacity-40 transition-opacity font-black">
                    04</div>
                <div class="flex items-center space-x-3 mb-4">
                    <i data-lucide="trending-up" class="text-emerald-400 w-8 h-8"></i>
                    <h2 class="text-xl font-bold font-mono text-emerald-300">THE GROWTH LOG</h2>
                </div>
                <p class="text-slate-400 text-sm mb-6">[Mission Roadmap]</p>
                <div class="space-y-2">
                    <span
                        class="inline-block bg-emerald-950/50 border border-emerald-900 text-emerald-400 text-[10px] px-2 py-1 rounded font-mono">GRAD
                        STUDIES (PhilSA)</span>
                    <span
                        class="inline-block bg-emerald-950/50 border border-emerald-900 text-emerald-400 text-[10px] px-2 py-1 rounded font-mono">UPSKILLING</span>
                    <span
                        class="inline-block bg-emerald-950/50 border border-emerald-900 text-emerald-400 text-[10px] px-2 py-1 rounded font-mono">MILESTONES</span>
                </div>
            </div>

            <!-- Simulation Deck (5th Card) -->
            <div onclick="initiateLogicLink()"
                class="glass-panel p-8 rounded-2xl pillar-card cursor-pointer group hover:scale-105 hover:shadow-[0_0_20px_rgba(245,158,11,0.3)] transition-all duration-300 ease-out relative overflow-hidden border-amber-500/30">
                <div
                    class="absolute -right-10 -top-10 text-9xl text-amber-900 opacity-10 group-hover:opacity-20 transition-opacity font-black">
                    SIM</div>
                <div class="flex items-center justify-between mb-4">
                    <div class="flex items-center space-x-3">
                        <i data-lucide="zap" class="text-amber-500 w-8 h-8"></i>
                        <h2 class="text-xl font-bold font-mono text-amber-400">SIM DECK</h2>
                    </div>
                    <div
                        class="flex items-center space-x-2 bg-amber-950/30 px-2 py-1 rounded border border-amber-900/50">
                        <div class="w-1.5 h-1.5 rounded-full bg-emerald-500 animate-blink"></div>
                        <span class="text-[8px] font-mono text-emerald-400">[SIMULATION_READY]</span>
                    </div>
                </div>
                <p class="text-slate-400 text-sm mb-2 font-mono">Simulation Deck // [LOGIC_LINK]</p>
                <p class="text-xs text-slate-500 mb-6 italic">"A gamified simulation of the PCIC Data Pipeline. Connect
                    nodes
                    to optimize flow."</p>
                <button onclick="initiateLogicLink()"
                    class="w-full py-3 bg-amber-600/20 border border-amber-500/50 text-amber-400 text-xs font-bold tracking-widest rounded hover:bg-amber-500 hover:text-black transition-all">
                    INITIATE LINK
                </button>
            </div>

            <!-- Neural Core (6th Card) -->
            <div id="neuralCoreCard"
                class="glass-panel p-8 rounded-2xl pillar-card relative overflow-hidden border-magenta-500/30 flex flex-col h-[450px]">
                <div class="absolute -right-10 -top-10 text-9xl text-magenta-900 opacity-10 font-black">
                    AI</div>
                <div class="flex items-center justify-between mb-4">
                    <div class="flex items-center space-x-3">
                        <i data-lucide="brain" class="text-magenta-500 w-8 h-8"></i>
                        <h2 class="text-xl font-bold font-mono text-magenta-400">NEURAL CORE</h2>
                    </div>
                    <select id="geminiModelSelect"
                        class="bg-slate-900/80 border border-magenta-500/30 text-magenta-400 text-[10px] font-mono rounded px-2 py-1 focus:outline-none focus:border-magenta-500 transition-all outline-none">
                        <option value="gemini-1.5-flash">1.5-FLASH</option>
                        <option value="gemini-1.5-flash-latest">FLASH-LATEST</option>
                        <option value="gemini-1.5-pro" selected>1.5-PRO</option>
                        <option value="gemini-1.5-flash-8b">FLASH-8B</option>
                    </select>
                </div>

                <div id="neuralChatWindow"
                    class="flex-1 overflow-y-auto mb-4 p-4 rounded bg-slate-950/80 backdrop-blur-md border border-magenta-500/20 font-mono text-xs space-y-4 chat-terminal">
                    <div class="text-magenta-400/70 italic">[SYSTEM_READY] Neural Core initialized. Expert context
                        established.</div>
                </div>

                <div class="relative">
                    <input type="text" id="neuralCoreInput"
                        class="w-full bg-slate-900/50 border border-magenta-500/30 rounded px-4 py-3 text-magenta-400 text-xs font-mono focus:outline-none focus:border-magenta-500 transition-all placeholder-magenta-900/50"
                        placeholder="Enter query for Neural Core..."
                        onfocus="this.closest('#neuralCoreCard').classList.add('focused')"
                        onblur="this.closest('#neuralCoreCard').classList.remove('focused')"
                        onkeydown="if(event.key === 'Enter') sendMessageToGemini()">
                    <div id="neuralThinking" class="absolute right-4 top-1/2 -translate-y-1/2 hidden">
                        <div class="flex space-x-1">
                            <div class="w-1.5 h-1.5 bg-magenta-500 rounded-full animate-pulse"></div>
                            <div class="w-1.5 h-1.5 bg-magenta-500 rounded-full animate-pulse"
                                style="animation-delay: 0.2s"></div>
                            <div class="w-1.5 h-1.5 bg-magenta-500 rounded-full animate-pulse"
                                style="animation-delay: 0.4s"></div>
                        </div>
                    </div>
                </div>
            </div>

        </div>

    </main>

    <!-- Footer -->
    <footer
        class="fixed bottom-0 w-full z-40 bg-[#020617] border-t border-cyan-900/50 font-mono text-[10px] text-cyan-600 py-2">
        <div class="max-w-7xl mx-auto px-6 flex justify-between items-center">
            <span id="footerStatus" class="animate-pulse">[SYSTEM_STABLE]</span>
            <span class="hidden md:inline text-slate-500 tracking-widest">[LATITUDE: 8.48° N / LONGITUDE: 124.65°
                E]</span>
            <span class="text-emerald-500 font-bold">[READY_FOR_DEPLOYMENT]</span>
        </div>
    </footer>

    <!-- Modals Overlay -->
    <div id="modalOverlay" onclick="closeModal()"
        class="fixed inset-0 z-[100] bg-slate-950/80 backdrop-blur-sm hidden flex items-center justify-center p-4">

        <!-- Modal Content Container -->
        <div onclick="event.stopPropagation()"
            class="glass-panel w-full max-w-4xl max-h-[90vh] overflow-y-auto rounded-xl p-8 shadow-[0_0_50px_rgba(2,6,23,0.8)] border border-cyan-500/30 transform transition-all scale-100 relative">

            <button onclick="closeModal()"
                class="absolute top-4 right-4 text-slate-400 hover:text-white hover:rotate-90 transition-all">
                <i data-lucide="x" class="w-8 h-8"></i>
            </button>

            <!-- Dynamic Content -->
            <div id="modalContent"></div>

        </div>
    </div>

    <!-- Admin Terminal Overlay -->
    <div id="adminTerminal"
        class="fixed inset-0 z-[200] bg-slate-950/90 backdrop-blur-md hidden flex items-center justify-center p-4">
        <div class="glass-panel w-full max-w-md p-6 rounded border-cyan-500/50 font-mono">
            <div class="flex items-center justify-between mb-4 pb-2 border-b border-cyan-900">
                <span class="text-xs text-cyan-400">ADMIN_UPLINK_TERMINAL</span>
                <i data-lucide="terminal" class="w-4 h-4 text-cyan-400"></i>
            </div>
            <p class="text-[10px] text-slate-500 mb-4">INPUT_ADMIN_KEY TO AUTHORIZE SECURE_MODULES...</p>
            <div class="flex space-x-2">
                <span class="text-cyan-400">_</span>
                <input type="password" id="adminKeyInput"
                    class="flex-1 bg-transparent border-none outline-none text-cyan-400 placeholder-cyan-900"
                    placeholder="********" autofocus onkeydown="if(event.key === 'Enter') verifyAdmin()">
            </div>
            <div id="adminError" class="text-[8px] text-red-500 mt-2 hidden">ACCESS_DENIED: CREDENTIALS_INVALID</div>
        </div>
    </div>

    <script>
        // Init Icons
        lucide.createIcons();

        // 1. Starfield Gen
        const starContainer = document.getElementById('starfield');
        for (let i = 0; i < 150; i++) {
            const star = document.createElement('div');
            const size = Math.random() < 0.5 ? 'w-0.5 h-0.5' : 'w-1 h-1';
            const opacity = Math.random() * 0.7 + 0.3;
            const top = Math.random() * 100;
            const left = Math.random() * 100;
            const anim = ['animate-twinkle-1', 'animate-twinkle-2', 'animate-twinkle-3'][Math.floor(Math.random() * 3)];

            star.className = `absolute bg-white rounded-full ${size} ${anim}`;
            star.style.top = `${top}%`;
            star.style.left = `${left}%`;
            star.style.opacity = opacity;
            starContainer.appendChild(star);
        }

        // 2. Boot Log Animation
        const logContent = [
            "DEBOY.OS BOOT... [OK]",
            "SCANNING GIS_MODULE... 1M+ POLYGONS PROTECTED.",
            "UPLINK... PHILSA AD ASTRA PROTOCOL ACTIVE.",
            "MISSION_OBJECTIVE... TARGET: MILLIONAIRE_V32.0.",
            "SYSTEM READY."
        ];
        const logEl = document.getElementById('bootLog');
        let lineIdx = 0;
        let charIdx = 0;

        function typeLog() {
            if (lineIdx < logContent.length) {
                const line = logContent[lineIdx];
                if (charIdx === 0) {
                    const p = document.createElement('p');
                    p.id = `log-line-${lineIdx}`;
                    logEl.appendChild(p);
                }
                const p = document.getElementById(`log-line-${lineIdx}`);
                p.textContent += line.charAt(charIdx);
                charIdx++;

                if (charIdx < line.length) {
                    setTimeout(typeLog, 20); // Typing speed
                } else {
                    lineIdx++;
                    charIdx = 0;
                    setTimeout(typeLog, 300); // Pause between lines
                }
                logEl.scrollTop = logEl.scrollHeight;
            }
        }
        setTimeout(typeLog, 500); // Start delay

        let isAdmin = false;
        // 3. Modal Logic
        const modalData = {
            'pillar1': {
                title: "GIS LAB // ORBITAL INTELLIGENCE",
                icon: "globe",
                color: "cyan",
                projects: [
                    {
                        isGEE: true,
                        title: "[ SATELLITE_UPLINK_01 ]",
                        metadata: {
                            type: "Multi-Temporal Analysis",
                            engine: "Google Earth Engine (JS API)",
                            sensors: "Sentinel-2 MSI, Landsat-8 OLI",
                            logic: "Random Forest / NDVI Time-Series"
                        }
                    },
                    { title: "Flood Risk Mapping v2.1", problem: "Inefficient manual overlay of hydro-data.", method: "Used QGIS PyQGIS for batch processing 500+ rasters.", impact: "Reduced analysis time by 400%." },
                    { title: "LGU Zoning Optimization", problem: "Conflict in land-use classification.", method: "Implemented strict topology rules & SQL queries.", impact: "Zero overlap errors in final submission." }
                ]
            },
            'pillar2': {
                title: "AUTOMATION VAULT // SYSTEM LOGIC",
                icon: "cpu",
                color: "purple",
                projects: [
                    { title: "PCIC Claims Auto-Processor", problem: "Manual entry of insurance claims leads to backlog.", method: "VBA Macros integrated with Excel DB.", impact: "Processed 10,000 claims in 24 hours." },
                    { title: "LLM Research Assistant", problem: "Slow literature review for studies.", method: "Python script utilizing OpenAI API for summarization.", impact: "Accelerated research phase by 5x." }
                ]
            },
            'pillar3': {
                title: "ENGINEERING SECTION // STRUCTURAL INTEGRITY",
                icon: "activity",
                color: "amber",
                projects: [
                    { title: "Watershed Runoff Model", problem: "Predicting peak discharge accurately.", method: "HEC-HMS calibration with local rainfall data.", impact: "Validated safety of downstream infra." },
                    { title: "3D Urban Layout", problem: "Visualizing spatial constraints.", method: "Sketch-Up massing model imported to GIS.", impact: "Stakeholders approved design in 1 meeting." }
                ]
            },
            'pillar4': {
                title: "THE GROWTH LOG // MISSION ROADMAP",
                icon: "trending-up",
                color: "emerald",
                projects: [
                    { title: "Launched Module: GIS Roadmap v1.0", isModule: true, path: "GIS Analyst Portal.html", problem: "Need for centralized learning progress tracking.", method: "Structured roadmap with persistent local storage logic.", impact: "100% visibility on geospatial skill acquisition." },
                    { title: "PhilSA Space Science Program", problem: "Upskilling requirement.", method: "Graduate level coursework.", impact: "Acquired advanced remote sensing capabilities." },
                    { title: "Blog: 'The Spatial Engineer'", problem: "Knowledge silo.", method: "Weekly technical articles.", impact: "Growing community of 500+ readers." }
                ]
            },
            'contact': {
                title: "SECURE COMMS // REQUEST UPLINK",
                icon: "shield",
                color: "red",
                isContact: true
            }
        };

        function openModal(id) {
            const data = modalData[id];
            const overlay = document.getElementById('modalOverlay');
            const container = document.getElementById('modalContent');

            let html = `
                <div class="flex items-center space-x-4 mb-8 pb-4 border-b border-slate-700">
                    <i data-lucide="${data.icon}" class="w-10 h-10 text-${data.color}-400"></i>
                    <h2 class="text-2xl md:text-3xl font-black font-mono text-${data.color}-400 tracking-tight">${data.title}</h2>
                </div>
            `;

            if (data.isContact) {
                html += `
                    <p class="text-slate-300 mb-8 font-mono">WARNING: Unauthorized access to source code is restricted. Submit credentials to request technical documentation.</p>
                    <div class="space-y-4 max-w-lg">
                        <div>
                            <label class="block text-xs font-bold text-slate-500 mb-1">IDENTIFICATION (NAME)</label>
                            <input type="text" class="w-full bg-slate-900/50 border border-slate-700 rounded p-3 text-white focus:border-red-500 focus:outline-none transition-colors" placeholder="Enter Name">
                        </div>
                        <div>
                            <label class="block text-xs font-bold text-slate-500 mb-1">QUERY PROTOCOL (MESSAGE)</label>
                            <textarea class="w-full h-32 bg-slate-900/50 border border-slate-700 rounded p-3 text-white focus:border-red-500 focus:outline-none transition-colors" placeholder="Describe Request"></textarea>
                        </div>
                        <button onclick="alert('ENCRYPTION KEY INVALID. (Just kidding, this is a demo.)')" class="w-full py-4 bg-red-900/30 border border-red-500/50 text-red-400 font-bold tracking-widest hover:bg-red-500 hover:text-white transition-all">
                            TRANSMIT REQUEST
                        </button>
                    </div>
                `;
            } else {
                html += `<div class="grid grid-cols-1 gap-6">`;
                data.projects.forEach(p => {
                    if (p.isGEE) {
                        html += `
                            <div class="glass-panel p-6 rounded-xl border-cyan-500/30 bg-cyan-950/20 relative overflow-hidden group">
                                <div class="absolute right-4 top-4 w-12 h-12 flex items-center justify-center">
                                    <div class="absolute inset-0 radar-sweep-icon opacity-50"></div>
                                    <i data-lucide="satellite" class="text-cyan-400 relative z-10"></i>
                                </div>
                                <h3 class="text-lg font-black text-cyan-400 mb-4 font-mono tracking-tighter">${p.title}</h3>
                                
                                <div class="grid grid-cols-2 gap-4 mb-6">
                                    ${Object.entries(p.metadata).map(([key, val]) => `
                                        <div>
                                            <p class="text-[8px] font-mono text-slate-500 uppercase tracking-widest">${key}</p>
                                            <p class="text-[10px] font-mono text-slate-300">${val}</p>
                                        </div>
                                    `).join('')}
                                </div>

                                <div class="flex items-center justify-between pt-4 border-t border-cyan-900/50">
                                    <div class="flex items-center space-x-2">
                                        <div class="w-2 h-2 rounded-full ${isAdmin ? 'bg-cyan-500 animate-pulse' : 'bg-amber-500'}"></div>
                                        <span class="text-[10px] font-mono uppercase ${isAdmin ? 'text-cyan-400' : 'text-amber-500'}">
                                            ${isAdmin ? 'GEE: UPLINK_ACTIVE [SYNCED]' : 'GEE: PRIVATE_ARCHIVE [LOCKED]'}
                                        </span>
                                    </div>
                                    <button onclick="${isAdmin ? "uplinkGEE()" : "showGEEAlert()"}" 
                                        class="px-5 py-2 rounded text-[10px] font-bold tracking-widest transition-all ${isAdmin ? 'bg-cyan-500 text-black hover:bg-cyan-400' : 'bg-amber-900/30 border border-amber-500/50 text-amber-500 hover:bg-amber-500 hover:text-white'}">
                                        ${isAdmin ? 'INITIATE_UPLINK' : 'SECURITY_PROTOCOL'}
                                    </button>
                                </div>
                            </div>
                        `;
                    } else if (p.isModule) {
                        html += `
                            <div class="bg-emerald-950/20 p-8 rounded-xl border border-emerald-500/30 flex flex-col md:flex-row justify-between items-center gap-6">
                                <div class="flex-1">
                                    <h3 class="text-2xl font-black text-emerald-400 mb-2">${p.title}</h3>
                                    <p class="text-sm text-slate-400 mb-4">${p.problem}</p>
                                    <div class="flex items-center space-x-2 text-[10px] font-mono text-emerald-600 uppercase">
                                        <i data-lucide="layers" class="w-3 h-3"></i>
                                        <span>Sub-system Optimized</span>
                                    </div>
                                </div>
                                <button onclick="launchModule('${p.path}')" class="px-8 py-3 bg-emerald-600 hover:bg-emerald-500 text-white font-bold rounded-lg transition-all flex items-center shadow-[0_0_15px_rgba(16,185,129,0.3)]">
                                    INITIALIZE MODULE <i data-lucide="play" class="w-4 h-4 ml-2"></i>
                                </button>
                            </div>
                        `;
                    } else {
                        html += `
                            <div class="bg-slate-900/40 p-6 rounded-xl border border-slate-800 hover:border-${data.color}-500/50 transition-colors">
                                <h3 class="text-xl font-bold text-white mb-2">${p.title}</h3>
                                <div class="space-y-2 text-sm text-slate-400">
                                    <p><strong class="text-${data.color}-400 font-mono text-xs">PROBLEM:</strong> ${p.problem}</p>
                                    <p><strong class="text-${data.color}-400 font-mono text-xs">METHOD:</strong> ${p.method}</p>
                                    <p><strong class="text-${data.color}-400 font-mono text-xs">IMPACT:</strong> ${p.impact}</p>
                                </div>
                                <div class="mt-4 pt-4 border-t border-slate-800/50 flex justify-end">
                                    <button onclick="openModal('contact')" class="text-xs font-bold text-${data.color}-500 hover:text-white transition-colors flex items-center">
                                        REQUEST DOCS <i data-lucide="lock" class="w-3 h-3 ml-1"></i>
                                    </button>
                                </div>
                            </div>
                        `;
                    }
                });
                html += `</div>`;
            }

            container.innerHTML = html;
            overlay.classList.remove('hidden');
            lucide.createIcons();
        }

        function launchModule(path) {
            const container = document.getElementById('modalContent');
            container.innerHTML = `
                <div class="flex flex-col h-[80vh]">
                    <div class="flex justify-between items-center mb-4 pb-4 border-b border-slate-700">
                        <div class="flex items-center space-x-3">
                            <i data-lucide="monitor" class="text-emerald-400"></i>
                            <span class="font-mono text-xs text-emerald-400">VIRTUAL_TERMINAL // ${path.toUpperCase()}</span>
                        </div>
                        <button onclick="openModal('pillar4')" class="text-xs font-bold text-slate-400 hover:text-white flex items-center">
                            <i data-lucide="arrow-left" class="w-3 h-3 mr-1"></i> BACK TO LOG
                        </button>
                    </div>
                    <iframe src="${path}" class="w-full flex-1 rounded-lg border border-slate-800 bg-white"></iframe>
                </div>
            `;
            lucide.createIcons();
        }

        function closeModal() {
            document.getElementById('modalOverlay').classList.add('hidden');
        }

        // --- Logic Link Mini-Game Engine ---
        let gameLevel = 1;
        const gameConfig = {
            1: { name: "VBA Basic", obstacles: [[2, 1], [3, 4], [1, 2]] },
            2: { name: "Python Automation", obstacles: [[1, 1], [2, 1], [4, 2], [1, 4], [3, 3]] },
            3: { name: "PCIC Smart System", obstacles: [[2, 0], [2, 1], [2, 2], [4, 3], [4, 4], [4, 5], [0, 3], [1, 3]] }
        };

        function initiateLogicLink() {
            const overlay = document.getElementById('modalOverlay');
            const container = document.getElementById('modalContent');

            container.innerHTML = `
                <div class="flex flex-col items-center">
                    <div class="w-full flex justify-between items-center mb-6 pb-4 border-b border-amber-500/30">
                        <div class="flex items-center space-x-3">
                            <i data-lucide="zap" class="text-amber-500"></i>
                            <span class="font-mono text-lg text-amber-400">LOGIC_LINK v1.0 // LEVEL: ${gameLevel} (${gameConfig[gameLevel].name})</span>
                        </div>
                        <div class="text-[10px] font-mono text-slate-500 tracking-tighter">OPTIMIZING PCIC_DATA_PIPELINE...</div>
                    </div>
                    
                    <div class="relative bg-slate-950 p-4 rounded-xl border border-amber-500/20 mb-6 shadow-inner">
                        <canvas id="gameCanvas" width="400" height="400" class="cursor-crosshair h-full max-w-full"></canvas>
                        <div id="gameOverlay" class="absolute inset-0 flex flex-col items-center justify-center bg-slate-950/80 hidden">
                             <h3 id="gameMsg" class="text-3xl font-black text-white mb-4 tracking-tighter"></h3>
                             <button id="nextLevelBtn" class="px-8 py-3 bg-amber-600 text-white font-bold rounded-lg hover:bg-amber-500 transition-all">NEXT_PHASE</button>
                        </div>
                    </div>

                    <div class="grid grid-cols-2 gap-8 w-full font-mono text-[10px]">
                        <div class="flex items-center space-x-2">
                             <div class="w-3 h-3 bg-emerald-500 rounded-full"></div>
                             <span class="text-slate-400">INPUT: Farmer Registry</span>
                        </div>
                        <div class="flex items-center space-x-2 justify-end">
                             <div class="w-3 h-3 bg-cyan-500 rounded-full shadow-[0_0_10px_#06b6d4]"></div>
                             <span class="text-slate-400">OUTPUT: PCIC Database</span>
                        </div>
                    </div>
                </div>
            `;

            overlay.classList.remove('hidden');
            lucide.createIcons();
            startGridGame();
        }

        function startGridGame() {
            const canvas = document.getElementById('gameCanvas');
            const ctx = canvas.getContext('2d');
            const gridSize = 6;
            const cellSize = canvas.width / gridSize;
            const obstacles = gameConfig[gameLevel].obstacles;

            const start = { x: 0, y: 0 };
            const end = { x: 5, y: 5 };
            let path = [{ ...start }];
            let drawing = false;

            function draw() {
                ctx.clearRect(0, 0, canvas.width, canvas.height);

                // Draw Grid
                ctx.strokeStyle = '#0f172a';
                ctx.lineWidth = 1;
                for (let i = 0; i <= gridSize; i++) {
                    ctx.beginPath(); ctx.moveTo(i * cellSize, 0); ctx.lineTo(i * cellSize, canvas.height); ctx.stroke();
                    ctx.beginPath(); ctx.moveTo(0, i * cellSize); ctx.lineTo(canvas.width, i * cellSize); ctx.stroke();
                }

                // Draw Obstacles
                ctx.fillStyle = '#f59e0b22';
                ctx.strokeStyle = '#f59e0b';
                obstacles.forEach(obs => {
                    ctx.fillRect(obs[0] * cellSize + 5, obs[1] * cellSize + 5, cellSize - 10, cellSize - 10);
                    ctx.strokeRect(obs[0] * cellSize + 5, obs[1] * cellSize + 5, cellSize - 10, cellSize - 10);
                });

                // Start / End
                ctx.fillStyle = '#10b981';
                ctx.beginPath(); ctx.arc(start.x * cellSize + cellSize / 2, start.y * cellSize + cellSize / 2, 10, 0, Math.PI * 2); ctx.fill();
                ctx.fillStyle = '#06b6d4';
                ctx.beginPath(); ctx.arc(end.x * cellSize + cellSize / 2, end.y * cellSize + cellSize / 2, 12, 0, Math.PI * 2); ctx.fill();

                // Draw Path
                if (path.length > 0) {
                    ctx.strokeStyle = '#22d3ee';
                    ctx.lineWidth = 4;
                    ctx.lineJoin = 'round';
                    ctx.shadowBlur = 15;
                    ctx.shadowColor = '#22d3ee';
                    ctx.beginPath();
                    ctx.moveTo(path[0].x * cellSize + cellSize / 2, path[0].y * cellSize + cellSize / 2);
                    path.forEach(p => ctx.lineTo(p.x * cellSize + cellSize / 2, p.y * cellSize + cellSize / 2));
                    ctx.stroke();
                    ctx.shadowBlur = 0;
                }
            }

            function getGridPos(e) {
                const rect = canvas.getBoundingClientRect();
                const x = (e.clientX || e.touches[0].clientX) - rect.left;
                const y = (e.clientY || e.touches[0].clientY) - rect.top;
                return {
                    x: Math.floor(x / (rect.width / gridSize)),
                    y: Math.floor(y / (rect.height / gridSize))
                };
            }

            function handleMove(e) {
                if (!drawing) return;
                const pos = getGridPos(e);
                const last = path[path.length - 1];

                // Must be adjacent
                if (Math.abs(pos.x - last.x) + Math.abs(pos.y - last.y) !== 1) return;

                // Obstacle check
                if (obstacles.some(o => o[0] === pos.x && o[1] === pos.y)) return;

                // Loop check
                if (path.some(p => p.x === pos.x && p.y === pos.y)) return;

                path.push(pos);
                draw();

                if (pos.x === end.x && pos.y === end.y) {
                    drawing = false;
                    winPhase();
                }
            }

            canvas.addEventListener('mousedown', (e) => {
                const pos = getGridPos(e);
                if (pos.x === start.x && pos.y === start.y) { drawing = true; path = [pos]; }
            });
            canvas.addEventListener('mousemove', handleMove);
            window.addEventListener('mouseup', () => drawing = false);

            canvas.addEventListener('touchstart', (e) => {
                e.preventDefault();
                const pos = getGridPos(e);
                if (pos.x === start.x && pos.y === start.y) { drawing = true; path = [pos]; }
            }, { passive: false });
            canvas.addEventListener('touchmove', (e) => { e.preventDefault(); handleMove(e); }, { passive: false });

            function winPhase() {
                const overlay = document.getElementById('gameOverlay');
                const msg = document.getElementById('gameMsg');
                const btn = document.getElementById('nextLevelBtn');

                overlay.classList.remove('hidden');

                if (gameLevel < 3) {
                    msg.innerHTML = `<span class="text-amber-400 font-mono text-sm leading-none block mb-2">PHASE_SUCCESSFUL</span>CONNECTION_AUTHORIZED`;
                    btn.textContent = "LOAD_NEXT_LEVEL";
                    btn.onclick = () => { gameLevel++; initiateLogicLink(); };
                } else {
                    msg.innerHTML = `<span class="text-emerald-400 font-mono text-sm block mb-2">OPTIMIZATION SUCCESSFUL</span>1.2M Records Synced`;
                    btn.textContent = "CLOSE_SIMULATION";
                    btn.onclick = () => {
                        closeModal();
                        document.getElementById('footerStatus').textContent = '[SYSTEM_STATUS: PEAK_PERFORMANCE]';
                        document.getElementById('footerStatus').classList.remove('text-cyan-500');
                        document.getElementById('footerStatus').classList.add('text-emerald-400', 'font-bold');
                    };
                }
            }
            draw();
        }

        // --- Admin Auth Sequence ---
        let logoClicks = 0;
        let logoTimer;
        // isAdmin is handled globally

        function handleLogoClick() {
            logoClicks++;
            clearTimeout(logoTimer);
            if (logoClicks === 3) {
                document.getElementById('adminTerminal').classList.remove('hidden');
                document.getElementById('adminKeyInput').focus();
                logoClicks = 0;
            }
            logoTimer = setTimeout(() => { logoClicks = 0; }, 1000);
        }

        function verifyAdmin() {
            const input = document.getElementById('adminKeyInput');
            const error = document.getElementById('adminError');
            if (input.value === "DEBOY_ARCHITECT") {
                isAdmin = true;
                document.getElementById('adminTerminal').classList.add('hidden');
                input.value = "";
                alert("ACCESS GRANTED: ADMIN_MODE_ACTIVE");
                if (!document.getElementById('modalOverlay').classList.contains('hidden')) {
                    openModal('pillar1');
                }
            } else {
                error.classList.remove('hidden');
                setTimeout(() => { error.classList.add('hidden'); }, 2000);
                input.value = "";
            }
        }

        window.addEventListener('keydown', (e) => {
            if (e.key === 'Escape') {
                document.getElementById('adminTerminal').classList.add('hidden');
            }
        });

        function showGEEAlert() {
            alert("SECURITY_PROTOCOL: This archive contains proprietary geospatial algorithms. Access is restricted to DEBOY.OS Architects.");
        }

        function uplinkGEE() {
            window.open("https://code.earthengine.google.com/", '_blank');
        }

        // Service Worker Registration
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => {
                navigator.serviceWorker.register('./sw.js')
                    .then(reg => console.log('SW_UPLINK_ESTABLISHED', reg))
                    .catch(err => console.log('SW_UPLINK_FAILED', err));
            });
        }

        // --- Neural Core AI Integration ---
        const NEURAL_CORE_CONTEXT = "You are the Neural Core of Deboy.OS. You are an expert mentor in GIS, Agricultural Engineering, and Automation. Assist the user with technical queries related to these fields.";

        // OWNER NOTE: Replace YOUR_API_KEY with your actual Google AI Studio Key. 
        // For GitHub security, use an environment variable or a local proxy.
        const GEMINI_API_KEY = "AIzaSyDf4CB4-eXVnnyVIePi4GL7OvnaexBjedw";

        async function sendMessageToGemini() {
            const input = document.getElementById('neuralCoreInput');
            const chatWindow = document.getElementById('neuralChatWindow');
            const thinking = document.getElementById('neuralThinking');
            const modelSelect = document.getElementById('geminiModelSelect');
            const query = input.value.trim();

            if (!query) return;

            const selectedModel = modelSelect.value;
            const geminiUrl = `https://generativelanguage.googleapis.com/v1beta/models/${selectedModel}:generateContent?key=${GEMINI_API_KEY}`;

            // Display User Message
            displayMessage('USER', query);
            input.value = "";
            thinking.classList.remove('hidden');

            try {
                const response = await fetch(geminiUrl, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({
                        contents: [{
                            parts: [{ text: NEURAL_CORE_CONTEXT + "\n\nUser Question: " + query }]
                        }]
                    })
                });

                const data = await response.json();
                thinking.classList.add('hidden');

                if (data.candidates && data.candidates[0].content.parts[0].text) {
                    const aiText = data.candidates[0].content.parts[0].text;
                    typeResponse(aiText);
                } else if (data.error) {
                    let errorMsg = data.error.message || 'UPLINK_INTERRUPTED';
                    if (data.error.status === 'NOT_FOUND') {
                        errorMsg = "MODEL_NOT_FOUND. Ensure 'Generative Language API' is enabled in AI Studio for this key.";
                    }
                    displayMessage('SYSTEM', `ERROR: ${errorMsg}`);
                    console.error('Gemini API Error:', data.error);
                } else {
                    displayMessage('SYSTEM', 'ERROR: UPLINK_INTERRUPTED. Check console for details.');
                    console.log('Payload Error:', data);
                }
            } catch (error) {
                thinking.classList.add('hidden');
                displayMessage('SYSTEM', 'ERROR: NEURAL_LINK_FAILED. Check connection.');
                console.error('Fetch Error:', error);
            }
        }

        function displayMessage(sender, text) {
            const chatWindow = document.getElementById('neuralChatWindow');
            const msgDiv = document.createElement('div');
            msgDiv.className = sender === 'USER' ? 'text-slate-400' : 'ai-message font-bold';
            msgDiv.innerHTML = `<span class="opacity-50 text-[10px] uppercase tracking-widest block mb-1">${sender}</span>${text}`;
            chatWindow.appendChild(msgDiv);
            chatWindow.scrollTop = chatWindow.scrollHeight;
            return msgDiv;
        }

        function typeResponse(text) {
            const chatWindow = document.getElementById('neuralChatWindow');
            const msgDiv = document.createElement('div');
            msgDiv.className = 'ai-message font-bold';
            msgDiv.innerHTML = `<span class="opacity-50 text-[10px] uppercase tracking-widest block mb-1">NEURAL_CORE</span><span class="content"></span><span class="typing-cursor"></span>`;
            chatWindow.appendChild(msgDiv);

            const contentSpan = msgDiv.querySelector('.content');
            let i = 0;
            const speed = 25;

            function type() {
                if (i < text.length) {
                    contentSpan.textContent += text.charAt(i);
                    i++;
                    chatWindow.scrollTop = chatWindow.scrollHeight;
                    setTimeout(type, speed);
                } else {
                    const cursor = msgDiv.querySelector('.typing-cursor');
                    if (cursor) cursor.remove();
                }
            }
            type();
        }

    </script>
</body>

</html>